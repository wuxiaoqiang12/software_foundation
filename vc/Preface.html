<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link href="common/css/sf.css" rel="stylesheet" type="text/css"/>
<title>Preface</title>
</head>
<link href="common/jquery-ui/jquery-ui.css" rel="stylesheet">
<script src="common/jquery-ui/external/jquery/jquery.js"></script>
<script src="common/jquery-ui/jquery-ui.js"></script>
<script src="common/toggleproofs.js"></script>
<link href="common/css/vc.css" rel="stylesheet" type="text/css"/>

<body>

<div id="page">

<div id="header">
<a href='https://www.cis.upenn.edu/~bcpierce/sf/current/index.html'>
<img src='common/media/image/sf_logo_sm.png'></a>
</br><a href='index.html'>  <span class='booktitleinheader'>Volume 5beta: Verifiable C</span><br></br>
<ul id='menu'>
   <a href='toc.html'><li class='section_name'>Table of Contents</li></a>
   <a href='coqindex.html'><li class='section_name'>Index</li></a>
</ul>
</a></div>

<div id="main">

<h1 class="libtitle">Preface</h1>


<div class="doc">

<div class="paragraph"> </div>

<a name="lab1"></a><h1 class="section">Welcome</h1>

<div class="paragraph"> </div>

 Here's a good way to build formally verified correct software:

<div class="paragraph"> </div>

<ul class="doclist">
<li> Write your program in an expressive language with a good proof theory
      (the Gallina language embedded in Coq's logic).

</li>
<li> Prove it correct in Coq.

</li>
<li> Extract it to ML and compile it with an optimizing ML compiler.

</li>
</ul>
 Unfortunately, for some applications you cannot afford to use
 a higher-order garbage-collected functional programming language
 such as Gallina or ML.  Perhaps you are writing an operating-system
 kernel, or a bit-shuffling cryptographic primitive, or the
 runtime system and garbage-collector of your functional language!
 In those cases, you might want to use a low-level imperative systems
 programming language such as C.

<div class="paragraph"> </div>

 But you still want your OS, or crypto, or GC, to be correct!
 So you should use machine-checked program verification in Coq.
 For that purpose:

<div class="paragraph"> </div>

 Use <i>Verifiable C</i>, a program logic and proof system for C.
 What is a program logic?  One example of a program logic is
 the Hoare logic that you studied  in the <i>Programming Language 
 Foundations</i> volume of this series.  (If you have not done so 
 already, study the Hoare and Hoare2 chapters of that volume,
 and do the exercises.)

<div class="paragraph"> </div>

 Verifiable C is based on Hoare logic, but a 21st-century version:
 higher-order impredicative concurrent separation logic.  Back
 in the 20th century, computer scientists discovered that Hoare Logic
 was not very good at verifying programs with pointer data structures;
 so <i>separation logic</i> was developed.  Hoare Logic was clumsy at
 verifying concurrent programs, so <i>concurrent separation logic</i> was
 developed.  Hoare Logic could not handle higher-order object-oriented
 programming patterns, or function-closures; so <i>higher-order 
 impredicative program logics</i> were developed.

<div class="paragraph"> </div>

 This electronic book is Volume 5 of the <i>Software Foundations</i>
 series, which presents the mathematical underpinnings of reliable
 software.   The principal novelty of <i>Software Foundations</i> is that it is one
 hundred percent formalized and machine-checked: the entire text is
 literally a script for Coq.  It is intended to be read alongside an
 interactive session with Coq.  All the details in the text are fully
 formalized in Coq, and the exercises are designed to be worked using
 Coq.

<div class="paragraph"> </div>

 Before studying this volume, you should be a competent
 user of Coq:

<div class="paragraph"> </div>

<ul class="doclist">
<li> Study  <i>Software Foundations Volume 1</i>  (Logical Foundations), and
   do the exercises!

</li>
<li> Study the Hoare and Hoare2 chapters of 
   <i>Software Foundations Volume 2</i>  (Programming Language Foundations), and
   do the exercises!

</li>
<li> Study the Sort, SearchTree, and ADT chapters of 
   <i>Software Foundations Volume 3</i>  (Verified Functional Algorithms), and
   do the exercises!

</li>
</ul>
 You will also need a working knowledge of the C programming language.

<div class="paragraph"> </div>


<div class="paragraph"> </div>

<a name="lab2"></a><h1 class="section">Practicalities</h1>

<div class="paragraph"> </div>

<a name="lab3"></a><h2 class="section">System Requirements</h2>

<div class="paragraph"> </div>

 Coq runs on Windows, Linux, and OS X.  The Preface of Volume 1
    describes the Coq installation you will need.  This edition was
    built with Coq 8.8.0 or 8.8.0.

<div class="paragraph"> </div>

    You must install the Verified Software Toolchain.
    Download the latest version from the web site,
    <a href="http://vst.cs.princeton.edu/download/"><span class="inlineref">http://vst.cs.princeton.edu/download/</span></a>
    (these chapters are currently tested on VST version 2.2)
    and build by doing <span class="inlinecode"><span class="id" type="var">make</span></span> <span class="inlinecode">-<span class="id" type="var">jN</span></span>, where <span class="inlinecode"><span class="id" type="var">N</span></span> is the number of 
    threads your machine can run in parallel (typically twice the
    number of cores).

<div class="paragraph"> </div>

    <i>You do not need to install CompCert</i> to do the exercises in this 
    volume.  But if you wish to modify and reparse the .c files,
    or verify C programs of your own, install the CompCert verified
    optimizing C compiler.  Download from compcert.inria.fr (this
    volume of Software Foundations you are reading now was tested with 
    CompCert version 3.2), and <span class="inlinecode">./<span class="id" type="var">configure</span></span> <span class="inlinecode">-<span class="id" type="var">clightgen</span></span> <span class="inlinecode"><span class="id" type="var">x86_32</span>/<span class="id" type="var">linux</span></span>

<div class="paragraph"> </div>

 
<div class="paragraph"> </div>

<a name="lab4"></a><h2 class="section">Configuration</h2>

<div class="paragraph"> </div>

 In this <span class="inlinecode"><span class="id" type="var">vc</span></span> directory, create a one-line CONFIGURE file containing

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" type="var">VST_LOC</span>=</span> <span class="inlinecode">/<span class="id" type="var">file</span>/<span class="id" type="var">path</span>/<span class="id" type="var">to</span>/<span class="id" type="var">VST</span></span>

<div class="paragraph"> </div>

    where you replace <span class="inlinecode">/<span class="id" type="var">file</span>/<span class="id" type="var">path</span>/<span class="id" type="var">to</span>/<span class="id" type="var">VST</span></span> with the location of your VST
    installation.

<div class="paragraph"> </div>

    If you have installed CompCert, you may add a second line to CONFIGURE,
    <span class="inlinecode"><span class="id" type="var">CC_LOC</span>=</span> <span class="inlinecode">/<span class="id" type="var">file</span>/<span class="id" type="var">path</span>/<span class="id" type="var">to</span>/<span class="id" type="var">CompCert</span></span>.
    This will allow you to run the CompCert/clightgen program,
    which turns (for example) <span class="inlinecode"><span class="id" type="var">hash.c</span></span> into <span class="inlinecode"><span class="id" type="var">hash.v</span></span>.  But we have already
    produced <span class="inlinecode"><span class="id" type="var">hash.v</span></span> for you, so you would need clightgen only
    if you modify or create a .c file.

<div class="paragraph"> </div>

    When running coqc, or CoqIDE, or Proof General, etc., you will
    need to give Coq the extra "include flags" that allow it to import
    from VST.  The Makefile in this <span class="inlinecode"><span class="id" type="var">vc</span></span> directory will build the 
    <span class="inlinecode"><span class="id" type="var">_CoqProject</span></span> file automatically&mdash;just do <span class="inlinecode"><span class="id" type="var">make</span></span> or <span class="inlinecode"><span class="id" type="var">make</span></span> <span class="inlinecode"><span class="id" type="var">_CoqProject</span></span>.

<div class="paragraph"> </div>

<a name="lab5"></a><h2 class="section">Exercises</h2>

<div class="paragraph"> </div>

 Each chapter includes exercises.  Each is marked with a
    "star rating," which can be interpreted as follows:

<div class="paragraph"> </div>

<ul class="doclist">
<li> One star: easy exercises that underscore points in the text
         and that, for most readers, should take only a minute or two.
         Get in the habit of working these as you reach them.

<div class="paragraph"> </div>


</li>
<li> Two stars: straightforward exercises (five or ten minutes).

<div class="paragraph"> </div>


</li>
<li> Three stars: exercises requiring a bit of thought (ten
         minutes to half an hour).

<div class="paragraph"> </div>


</li>
<li> Four and five stars: more difficult exercises (half an hour
         and up).

</li>
</ul>

<div class="paragraph"> </div>

   <font color="red"> <i>Please do not post solutions to the exercises in any public place</i>: </font>
    Software Foundations is widely used both for self-study and for
    university courses.  Having solutions easily available makes it
    much less useful for courses, which typically have graded homework
    assignments.  The authors especially request that readers not post
    solutions to the exercises anyplace where they can be found by
    search engines.

<div class="paragraph"> </div>

<a name="lab6"></a><h2 class="section">Downloading the Coq Files</h2>

<div class="paragraph"> </div>

 A tar file containing the full sources for the "release version"
    of this book (as a collection of Coq scripts and HTML files) is
    available at <a href="http://www.cs.princeton.edu/~appel/vc"><span class="inlineref">http://www.cs.princeton.edu/~appel/vc</span></a>.

<div class="paragraph"> </div>

    (If you are using the book as part of a class, your professor may
    give you access to a locally modified version of the files, which
    you should use instead of the release version.) 
<div class="paragraph"> </div>

<a name="lab7"></a><h2 class="section">For Instructors and Contributors</h2>

<div class="paragraph"> </div>

 If you plan to use these materials in your own course, you will
    undoubtedly find things you'd like to change, improve, or add.
    Your contributions are welcome!  Please see the <a href="https://www.cis.upenn.edu/~bcpierce/sf/lf-current/Preface.html"><span class="inlineref">Preface</span></a>
    to <i>Logical Foundations</i> for instructions. 
</div>

<div class="doc">
<a name="lab8"></a><h1 class="section">Thanks</h1>

<div class="paragraph"> </div>

 Development of the <i>Software Foundations</i> series has been
    supported, in part, by the National Science Foundation under the
    NSF Expeditions grant 1521523, <i>The Science of Deep
    Specification</i>. 
</div>
</div>



</div>

</body>
</html>